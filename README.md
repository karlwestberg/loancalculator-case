# Loan calculator case

React app build /w

- [vite](https://vite.dev/)
Builds fast with easy config, creating a great dev experience. Has good plugin and library support (including 'vitest')
The app was initially created using `npm create vite` for fast setup with minimal config.

- [tailwindcss](https://tailwindcss.com/):
Gives access to more or less everything css, without the need for css files. Speeds up styling and easy to setup with vite.

- [@tanstack/react-query](https://www.npmjs.com/package/@tanstack/react-query):
Simplifies fetching and state management. Removes the need to write complicated custom fetching hooks with error handling and state management.

- [react-hook-form](https://www.npmjs.com/package/react-hook-form):
Removes the need to manage form state and makes form validation easy.

- [vitest](https://www.npmjs.com/package/vitest) (+ @testing-library):
Implements well with vite, making it easy to write tests for react components using '@testing-library/react'

## Run locally
1. Install dependencies
```
npm install
```

2. Build app
```
npm run build
```
It's important to run this (at least once) before starting the local dev server. This script generates api types (using ```openapi-typescript```) and icon components.

3. Run dev server
```
npm run dev
```

4. Open http://localhost:5173 in your browser

## Project structure
And some components worth highlighting

```md
src/
- components/              # React components.
  - LoanCalculator.tsx     # Master component for the loan calculator form.
  - LoanTerms.tsx          # Displays loan terms including, approved, non-approved, default states.
  ...
- hooks/                   # React hooks.
  - useApiQuery.ts         # Handles react-query GET requests with the API.
  - useCalculateLoan.ts   # Handles calculate loan POST request.
- utils/                   # Helper functions
- config/
  - env.ts               # Handles env variables
- tests/components         # Tests for react components
- types/                   # Reusable type declarations, contains the generated openapi types from the API (`https://loancalculator-ivory.vercel.app/api/openapi.yaml`).
- assets/icons             # All icons used as svg files.
- App.tsx                  # Top react app layer
- index.css                # Default css, mainly generated by `npm create vite`
- main.tsx                 # Renders react to HTML
```

## Approach and choices

Probably the first consideration was what type of react app I should build this as. Should I use a framework and what package manager should I use? The choice I ultimately made was to build the app as a static ```vite``` app using ```npm```. ```vite``` was used for it's build speed and generally good dev experience, with minial config and good library support. ```npm``` was to remove fuzz and there were no good reasons to use ```yarn``` or ```bun``` for example. Additionally I choose to use ```tailwindcss``` because of how much it speeds up styling and how easy it is to setup, without loosing any serious css features.

The main technical priority from the get go was to create a form that handles form validation safely with some type safety. This is where ```react-hook-form``` comes in since it solves most of these issues out of the box.

Another choice was how to handle data fetching. To ensure a simple approach that would handle states and errors well with minimal overhead, I opted for ```@tanstack/react-query```. This works especially well with the generated types form the api (using ```openapi-typescript```), and were easy to implement into custom hooks (```useApiQuery.ts```, ```useCalculateLoan.ts```).

For testing I opted for ```vitest``` for how well it implements with ```vite``` and how it works well with ```@testing-library```. Specifically I wrote two tests:
1. ```LoanTerms.test.tsx```: Tests if the LoanTerms component renders the correct states depending on it's provided props
2. ```LoanCalculator.test.tsx```: Tests that the loan calculator renders the form correctly (and it's loading and error states) + that it submits data correctly depending on user input.
I prioritized these test because of how they ensure that visual feedback (LoanTerms) are rendered according to spec, as well as making sure the form renders, accepts data and submits correctly.

